<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Users & Restaurants Manager</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

</head>
<body>
    <div class="container">
        <header>
            <div>
                <h1>üë•üçΩÔ∏è Users & Restaurants Manager</h1>
                <p class="subtitle">Full Stack CRUD Application with Day-of Ratings</p>
            </div>
            <div>
                <button id="navBtn" class="btn-secondary">View All Users</button>
            </div>
        </header>

        <!-- Screen 1: Create User -->
        <div id="createScreen" class="screen active">
            <div class="card">
                <h2>üë§ Create New User</h2>
                <div id="createAlert"></div>
                
                <form id="userForm">
                    <div style="display: flex; gap: 10px; align-items: flex-end; margin-bottom: 20px;">
                        <div class="form-group" style="flex: 1; margin-bottom: 0;">
                            <label>Username</label>
                            <input type="text" id="username" required placeholder="Enter username">
                        </div>
                        <button type="submit" style="height: 46px;">Create User</button>
                    </div>

                    <div class="create-layout">
                        <div>
                            <h3 style="color: #333; margin-bottom: 15px; font-size: 18px;">Cuisine Preferences</h3>
                            <p style="color: #666; margin-bottom: 15px; font-size: 14px;">Click to select</p>
                            <div id="cuisineGrid" class="cuisine-grid">
                                <div class="empty-state">Loading...</div>
                            </div>
                        </div>

                        <div>
                            <h3 style="color: #333; margin-bottom: 15px; font-size: 18px;">Available Restaurants</h3>
                            <p style="color: #666; margin-bottom: 15px; font-size: 14px;">Click to select</p>
                            <div id="restaurantGrid" class="restaurant-grid">
                                <div class="empty-state">Loading...</div>
                            </div>
                        </div>

                        <div>
                            <h3 style="color: #333; margin-bottom: 15px; font-size: 18px;">Selected & Ratings</h3>
                            <p style="color: #666; margin-bottom: 15px; font-size: 14px;">Adjust ratings (1-10)</p>
                            <div id="selectedCuisines" class="selected-cuisines">
                                <div class="empty-state">No items selected</div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>

        <!-- Screen 2: User List & Day-of Ratings -->
        <div id="listScreen" class="screen">
            <div class="card">
                <h2>üë• All Users</h2>
                <div id="listAlert"></div>

                <div style="display: flex; gap: 10px; align-items: center; margin-bottom: 20px; flex-wrap: wrap;">
                    <div class="action-bar" style="margin-bottom: 0;">
                        <button onclick="selectAllUsers()">Select All</button>
                        <button onclick="deselectAllUsers()" class="btn-secondary">Deselect All</button>
                        <button onclick="deleteSelectedUsers()" class="btn-danger">Delete Selected</button>
                    </div>
                    <div id="selectedCount" class="selected-count" style="display: none; margin-bottom: 0;">
                        0 users selected
                    </div>
                    <div id="matchbtn" style="display: none;">
                        <button onclick="callMagic()" class="btn-primary">Generate Matches</button>
                    </div>
                </div>

                <div id="userListGrid" class="user-list-grid">
                    <div class="empty-state">Loading users...</div>
                </div>

                <!-- Day-of Ratings Section -->
                <div id="dayofSection" class="dayof-section" style="display: none;">
                    <div class="dayof-header">
                        <h3>üéØ Day-of Ratings</h3>
                        <p>Select up to 3 restaurants or cuisines for day-of ratings</p>
                    </div>
                    <div id="dayofAlert"></div>
                    <div class="dayof-limit-warning">
                        <strong>‚ö†Ô∏è Limit:</strong> Maximum 3 day-of ratings per user (restaurants + cuisines combined)
                    </div>

                    <div class="dayof-grid">
                        <div>
                            <h4 style="color: #333; margin-bottom: 15px;">Select Items to Rate</h4>
                            
                            <div style="margin-bottom: 20px;">
                                <h5 style="color: #ff6b6b; margin-bottom: 10px; font-size: 14px;">CUISINES</h5>
                                <div id="dayofCuisineGrid" class="cuisine-grid dayof-selection-area">
                                    <div class="empty-state">Loading...</div>
                                </div>
                            </div>

                            <div>
                                <h5 style="color: #28a745; margin-bottom: 10px; font-size: 14px;">RESTAURANTS</h5>
                                <div id="dayofRestaurantGrid" class="restaurant-grid dayof-selection-area">
                                    <div class="empty-state">Loading...</div>
                                </div>
                            </div>
                        </div>

                        <div class="dayof-selected-area">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <h4 style="color: #333; margin: 0;">Day-of Ratings</h4>
                                <span class="limit-counter" id="dayofCounter">0/3</span>
                            </div>
                            <div id="dayofSelectedItems">
                                <div class="empty-state">No items selected</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="matchingScreen" class="screen">
            <div class="card">
                <h2>üéØ Restaurant Matches</h2>
                <div id="matchingAlert"></div>
                
                <!-- <div style="margin-bottom: 20px;">
                    <button onclick="callMagic()" class="btn-primary">Generate Matches</button>
                </div> -->
        
                <div id="matchingResults" class="matching-results">
                    <div class="empty-state">Select users and click Generate Matches</div>
                </div>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>